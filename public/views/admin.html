<div ng-if="loading" class="loading-wrapper">
    <div class="preloader-wrapper big active loading">
        <div class="spinner-layer spinner-blue">
            <div class="circle-clipper left">
                <div class="circle"></div>
            </div>
            <div class="gap-patch">
                <div class="circle"></div>
            </div>
            <div class="circle-clipper right">
                <div class="circle"></div>
            </div>
        </div>

        <div class="spinner-layer spinner-red">
            <div class="circle-clipper left">
                <div class="circle"></div>
            </div>
            <div class="gap-patch">
                <div class="circle"></div>
            </div>
            <div class="circle-clipper right">
                <div class="circle"></div>
            </div>
        </div>

        <div class="spinner-layer spinner-yellow">
            <div class="circle-clipper left">
                <div class="circle"></div>
            </div>
            <div class="gap-patch">
                <div class="circle"></div>
            </div>
            <div class="circle-clipper right">
                <div class="circle"></div>
            </div>
        </div>

        <div class="spinner-layer spinner-green">
            <div class="circle-clipper left">
                <div class="circle"></div>
            </div>
            <div class="gap-patch">
                <div class="circle"></div>
            </div>
            <div class="circle-clipper right">
                <div class="circle"></div>
            </div>
        </div>
    </div>
</div>
<div ng-if="!loading">
    <nav class="teal lighten-2">
        <div class="nav-wrapper">
            <ul id="nav-mobile" class="hide-on-med-and-down">
                <li><a>課程</a></li>
            </ul>
        </div>
    </nav>
    <div class="row">
        <div class="col s12 m3">
            <div class="card-panel teal hoverable clickable" ng-click="createCourse()">
                <span class="white-text">創造新課程</span>
            </div>
        </div>
        <div class="col s12 m3" ng-repeat="course in courses">
            <div class="card-panel teal hoverable clickable" ng-click="selectCourse(course)">
                <span class="white-text">{{course.name}} {{course.academic_year}}年</span>
            </div>
        </div>
    </div>
    <div ng-if="inCreatingCourse" class="container">
        <form name="course-form">
            <div class="row">
                <div class="input-field col s8">
                    <input id="id" type="text" class="validate" ng-model="form.courseId" required>
                    <label for="id">課號</label>
                </div>
            </div>
            <button ng-click="course-form.$invalid || submitCreateCourse()" class="btn waves-effect waves-light" type="submit" name="action"
                    ng-disabled="course-form.$invalid">
                Submit
                <i class="material-icons right">send</i>
            </button>

        </form>
    </div>
    <div ng-if="courseLoading" class="loading-wrapper">
        <div class="preloader-wrapper big active loading">
            <div class="spinner-layer spinner-blue">
                <div class="circle-clipper left">
                    <div class="circle"></div>
                </div>
                <div class="gap-patch">
                    <div class="circle"></div>
                </div>
                <div class="circle-clipper right">
                    <div class="circle"></div>
                </div>
            </div>

            <div class="spinner-layer spinner-red">
                <div class="circle-clipper left">
                    <div class="circle"></div>
                </div>
                <div class="gap-patch">
                    <div class="circle"></div>
                </div>
                <div class="circle-clipper right">
                    <div class="circle"></div>
                </div>
            </div>

            <div class="spinner-layer spinner-yellow">
                <div class="circle-clipper left">
                    <div class="circle"></div>
                </div>
                <div class="gap-patch">
                    <div class="circle"></div>
                </div>
                <div class="circle-clipper right">
                    <div class="circle"></div>
                </div>
            </div>

            <div class="spinner-layer spinner-green">
                <div class="circle-clipper left">
                    <div class="circle"></div>
                </div>
                <div class="gap-patch">
                    <div class="circle"></div>
                </div>
                <div class="circle-clipper right">
                    <div class="circle"></div>
                </div>
            </div>
        </div>
    </div>
    <div ng-if="inCourse && !courseLoading" class="container">
        <form name="timelog-form" class="row">
            <input type="text" ng-model="timelogDate" id="datepicker" class="col s3" required>
            <button ng-click="timelog-form.$invalid || createTimelog()" class="btn waves-effect waves-light s6" type="submit" name="action"
                    ng-disabled="timelog-form.$invalid">
                新增Timelog
            </button>
        </form>
        <table class="striped">
            <thead>
            <tr>
                <th data-field="id">組別</th>
                <th data-field="name">學號</th>
                <th data-field="name">學生</th>
                <th data-field="name">專案名稱</th>
                <th data-field="middleGrade">Demo1成績</th>
                <th data-field="finalGrade">Demo2成績</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="group in groups" ng-class="{red: !group.projectName, 'lighten-3': !group.projectName}">
                <td>{{group.id}}</td>
                <td>{{group.students | studentsId}}</td>
                <td>{{group.students | studentsName}}</td>
                <td>{{group.projectName}}</td>
            </tr>
            </tbody>
        </table>
        <div class="section">
            <h5>尚未分組的學生</h5>
            <table class="striped">
                <thead>
                <tr>
                    <th data-field="name">學號</th>
                    <th data-field="name">學生</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="student in studentsWithoutGroup">
                    <td>{{student.id}}</td>
                    <td>{{student.name}}</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="progress" ng-if="requestLoading">
        <div class="indeterminate"></div>
    </div>
</div>